<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Usuarios</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1946/1946488.png">
</head>
<body>
    <header>
        <h1>CRUD de Usuarios</h1>
        <p>Proyecto Backend en Node.js + Express</p>
    </header>

    <section class="project-intro">
        <h2>Descripci√≥n</h2>
        <p>Este proyecto es una API REST que permite crear, leer, actualizar y eliminar usuarios.</p>
    </section>

    <section class="project-preview">
        <h2>Vista previa de la API</h2>
        <div class="preview-card">
            <h3>Endpoints principales</h3>
            <ul>
                <li><code>GET /api/users</code> ‚Üí Listar usuarios</li>
                <li><code>POST /api/users</code> ‚Üí Crear usuario</li>
                <li><code>PUT /api/users/:id</code> ‚Üí Actualizar usuario</li>
                <li><code>DELETE /api/users/:id</code> ‚Üí Eliminar usuario</li>
            </ul>
            <p class="small">Se usa Node.js + Express y estructura MVC.</p>
        </div>
    </section>
    
    <!-- Secci√≥n de prueba del CRUD -->
  <section class="crud-test">
  <h2>Probar CRUD de Usuarios</h2>

  <!-- Crear -->
  <div>
    <input type="text" id="name" placeholder="Nombre">
    <input type="email" id="email" placeholder="Email">
    <button onclick="createUser()">Crear Usuario</button>
  </div>

  <!-- Leer -->
  <div>
    <input type="number" id="readId" placeholder="ID a leer">
    <button onclick="getUserById()">Leer Usuario</button>
  </div>

  <!-- Actualizar -->
  <div>
    <input type="number" id="updateId" placeholder="ID a actualizar">
    <input type="text" id="updateName" placeholder="Nuevo Nombre">
    <input type="email" id="updateEmail" placeholder="Nuevo Email">
    <button onclick="updateUser()">Actualizar Usuario</button>
  </div>

  <!-- Eliminar -->
  <div>
    <input type="number" id="deleteId" placeholder="ID a eliminar">
    <button onclick="deleteUserById()">Eliminar Usuario</button>
  </div>

  <!-- Lista -->
  <div>
    <h3>Lista de Usuarios</h3>
    <ul id="user-list"></ul>
    <button onclick="loadUsers()">Mostrar Lista</button>
    <button onclick="deleteAllUsers()">Eliminar Todos</button>
  </div>
</section>
    
  <section class="project-links">
        <h2>Link al c√≥digo ‚¨áÔ∏è</h2>
        <a href="https://github.com/jjulito/crud-usuarios" target="_blank" class="btn">Ver en GitHub</a>
    </section>

    <footer>
        <p>üíª Creado por Julito</p>
    </footer>
    
    <script>
  const API_URL = "https://crud-usuarios-1zkp.onrender.com/api/users";

  // Mostrar todos los usuarios
  async function loadUsers() {
    try {
      const res = await fetch(API_URL);
      const users = await res.json();
      const list = document.getElementById("user-list");
      list.innerHTML = "";
      users.forEach(u => {
        const li = document.createElement("li");
        li.textContent = `ID: ${u.id} - ${u.name} (${u.email})`;
        list.appendChild(li);
      });
    } catch (err) {
      console.error(err);
      alert("Error cargando usuarios");
    }
  }

  // Crear usuario
  async function createUser() {
    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    if (!name || !email) return alert("Completa todos los campos");

    try {
      await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email })
      });
      alert("Usuario creado");
    } catch (err) {
      console.error(err);
      alert("Error creando usuario.");
    }
  }

  // Leer usuario por ID
  async function getUserById() {
    const id = document.getElementById("readId").value;
    if (!id) return alert("Ingresa un ID");

    try {
      const res = await fetch(`${API_URL}/${id}`);
      if (!res.ok) return alert("Usuario no encontrado");
      const user = await res.json();
      alert(`Usuario encontrado:\nID: ${user.id}\nNombre: ${user.name}\nEmail: ${user.email}`);
    } catch (err) {
      console.error(err);
      alert("Error leyendo usuario.");
    }
  }

  // Actualizar usuario por ID
  async function updateUser() {
    const id = document.getElementById("updateId").value;
    const name = document.getElementById("updateName").value;
    const email = document.getElementById("updateEmail").value;
    if (!id) return alert("Ingresa un ID para actualizar");

    try {
      const res = await fetch(`${API_URL}/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email })
      });
      if (!res.ok) return alert("Usuario no encontrado");
      alert("Usuario actualizado");
    } catch (err) {
      console.error(err);
      alert("Error actualizando usuario.");
    }
  }

  // Eliminar usuario por ID
  async function deleteUserById() {
    const id = document.getElementById("deleteId").value;
    if (!id) return alert("Ingresa un ID para eliminar");
    if (!confirm("¬øSeguro que quieres eliminar este usuario?")) return;

    try {
      const res = await fetch(`${API_URL}/${id}`, { method: "DELETE" });
      if (!res.ok) return alert("Usuario no encontrado");
      alert("Usuario eliminado");
    } catch (err) {
      console.error(err);
      alert("Error eliminando usuario.");
    }
  }

  // Eliminar todos
  async function deleteAllUsers() {
    if (!confirm("¬øEliminar todos los usuarios?")) return;
    try {
      await fetch(API_URL, { method: "DELETE" });
      alert("Todos los usuarios eliminados");
    } catch (err) {
      console.error(err);
      alert("Error eliminando usuarios.");
    }
  }
</script>

    
</body>
</html>
